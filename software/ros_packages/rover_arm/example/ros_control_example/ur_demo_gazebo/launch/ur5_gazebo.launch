<launch>
  <!--find urdf file + push it to param server -->
  <include file="$(find ur_description)/launch/ur5_upload.launch"/>

  <!--launch empty gazebo world-->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" default="worlds/empty.world"/>
    <arg name="paused" value="false"/>
    <arg name="gui" value="true"/>
   </include>
  

  <!--spawn ur5 in gazebo-->
  <node name="spawn_gazebo_model" pkg="gazebo_ros" type="spawn_model" args="-urdf -param robot_description -model robot -z 0.1" respawn="false" output="screen" />

  <!--start robot state publisher-->
  <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="50.0" />
    <param name="tf_prefix" type="string" value="" />
  </node>
   
  <!--start joint state controller-->
  <rosparam file="$(find ur_demo_gazebo)/controllers/joint_state_controller.yaml" command="load"/>
  <node name="joint_state_controller_spawner" pkg="controller_manager" type="controller_manager" args="spawn joint_state_controller" respawn="false" output="screen"/>
  
  <!--start trajectory controller-->
  <rosparam file="$(find ur_demo_gazebo)/controllers/demo_controllers.yaml" command="load"/>
  <node name="demo_controller_spawner" pkg="controller_manager" type="controller_manager" args="spawn demo_controller" respawn="false" output="screen"/>

  <!--start joint group pos controller-->
  <node name="ros_control_controller_manager" pkg="controller_manager" type="controller_manager" respawn="false" output="screen" args="load demo_group_position_controller" />

</launch>